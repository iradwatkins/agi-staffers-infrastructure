SSH into your server and run these commands:

1. Navigate to project directory:
cd /root/stepperslife

2. Create the fix script:
cat > fix-build-extensions.js << 'EOF'
#!/usr/bin/env node

const fs = require('fs');
const path = require('path');

const distPath = path.join(__dirname, 'dist');

function fixExtensionsInDirectory(dir) {
  if (!fs.existsSync(dir)) {
    console.log(`âŒ Directory ${dir} does not exist`);
    return;
  }

  const files = fs.readdirSync(dir);
  
  files.forEach(file => {
    const fullPath = path.join(dir, file);
    const stat = fs.statSync(fullPath);
    
    if (stat.isDirectory()) {
      fixExtensionsInDirectory(fullPath);
    } else if (file.endsWith('.tsx')) {
      // Rename .tsx to .js
      const newPath = fullPath.replace(/\.tsx$/, '.js');
      fs.renameSync(fullPath, newPath);
      console.log(`âœ… Renamed: ${file} -> ${file.replace(/\.tsx$/, '.js')}`);
    }
  });
}

function fixHTMLReferences(dir) {
  const files = fs.readdirSync(dir);
  
  files.forEach(file => {
    const fullPath = path.join(dir, file);
    const stat = fs.statSync(fullPath);
    
    if (stat.isDirectory()) {
      fixHTMLReferences(fullPath);
    } else if (file.endsWith('.html')) {
      let content = fs.readFileSync(fullPath, 'utf8');
      const originalContent = content;
      
      // Replace all .tsx references with .js in script tags and imports
      content = content.replace(/\.tsx(?=["'\s>)])/g, '.js');
      
      if (content !== originalContent) {
        fs.writeFileSync(fullPath, content, 'utf8');
        console.log(`âœ… Updated HTML references in: ${file}`);
      }
    }
  });
}

console.log('ðŸ”§ Fixing SteppersLife build output extensions...\n');

// Step 1: Rename all .tsx files to .js
console.log('Step 1: Renaming .tsx files to .js...');
fixExtensionsInDirectory(distPath);

// Step 2: Update all references in HTML files
console.log('\nStep 2: Updating HTML references...');
fixHTMLReferences(distPath);

console.log('\nâœ… Build extensions fixed successfully!');
console.log('ðŸš€ Your site should now load properly in browsers.');
EOF

3. Make the script executable:
chmod +x fix-build-extensions.js

4. Update package.json build script:
npm pkg set scripts.build="vite build && node fix-build-extensions.js"

5. Clean old build artifacts:
rm -rf dist node_modules/.vite

6. Run the new build:
npm run build

7. Verify the fix worked:
echo "Checking for .tsx files (should be none):"
find dist -name "*.tsx" -type f

echo "Checking for .js files (should be several):"
find dist -name "*.js" -type f | head -5

echo "Checking HTML references:"
grep -r "\.tsx" dist/ || echo "No .tsx references found - Good!"

8. Restart your service:
docker-compose restart

9. Test the site:
curl -I http://localhost:5173